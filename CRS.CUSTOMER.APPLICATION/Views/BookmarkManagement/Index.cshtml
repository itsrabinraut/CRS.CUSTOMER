@model CRS.CUSTOMER.APPLICATION.Models.BookmarkManagement.BookmarkManagementModel

@{
    ViewBag.Title = "Bookmarks";
    Layout = "~/Views/Shared/_Layout.cshtml";
    int clubCount = @Model.BookmarkedClubs.Count;
    int hostCount = Model.BookmarkedHosts.Count;
}
<style>
    #like {
        position: absolute;
        top: 3px;
        right: 3px;
    }

    .inset-0 {
        inset: 5rem !important;
    }
    #test{
        height:100vh;
    }
</style>
<div class="">
    <div class="flex px-[16px] gap-[24px]" style="border-bottom: 4px solid #EFEFEF;">
        <div class="grid grid-cols-2 w-full tab-container-plane bg-white gap-[14px]">
            <button id="tab1Button" class="tab-button-plane tab-link active">
                @CRS.CUSTOMER.APPLICATION.Resources.Resource.Club
            </button>
            <button id="tab2Button" class="tab-button-plane tab-link">
                @CRS.CUSTOMER.APPLICATION.Resources.Resource.Host
            </button>
        </div>
    </div>
</div>
<div>
    <div class="bg-white">
        <div id="tab1" class="tab-content-plane">

            <div class="flex flex-row items-center bg-[#E5E5E5] h-[32px]">
                <p class="pl-[16px] text-[14px] font-[500] ">
                    @clubCount @CRS.CUSTOMER.APPLICATION.Resources.Resource.Items
                </p>
            </div>
            @if (Model.BookmarkedClubs.Count <= 0)
            {
                <div style="height: auto" class="flex flex-col gap-4 p-4  border-t border-t-[#E0E0E0]  justify-center items-center " style="padding-top:64px">
                    @*<div>*@
                    <div style="display:flex; justify-content:center; align-items:center">
                        <svg width="160" height="160" viewBox="0 0 160 160" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="80" cy="80" r="79" stroke="#F4F4F4" stroke-width="2" />
                            <g clip-path="url(#clip0_5379_118965)">
                                <path d="M46.6668 46.667V56.8232L38.3335 67.9344V68.8892C38.3335 73.4574 42.0987 77.2225 46.6668 77.2225V113.334H91.1113V88.3337H96.6668V113.334H113.333V77.2225C117.902 77.2225 121.667 73.4574 121.667 68.8892V67.9344L113.333 56.8232V46.667H46.6668ZM52.2224 52.2225H107.778V55.0003H52.2224V52.2225ZM50.8335 60.5559H109.167L115.851 69.4969C115.547 70.7013 114.636 71.667 113.333 71.667C111.793 71.667 110.556 70.43 110.556 68.8892H105C105 70.43 103.763 71.667 102.222 71.667C100.682 71.667 99.4446 70.43 99.4446 68.8892H93.889C93.889 70.43 92.6521 71.667 91.1113 71.667C89.5705 71.667 88.3335 70.43 88.3335 68.8892H82.7779C82.7779 70.43 81.541 71.667 80.0002 71.667C78.4594 71.667 77.2224 70.43 77.2224 68.8892H71.6668C71.6668 70.43 70.4299 71.667 68.8891 71.667C67.3483 71.667 66.1113 70.43 66.1113 68.8892H60.5557C60.5557 70.43 59.3187 71.667 57.7779 71.667C56.2371 71.667 55.0002 70.43 55.0002 68.8892H49.4446C49.4446 70.43 48.2076 71.667 46.6668 71.667C45.3647 71.667 44.4533 70.7013 44.1495 69.4969L50.8335 60.5559ZM52.2224 75.0524C53.6981 76.387 55.6512 77.2225 57.7779 77.2225C59.9047 77.2225 61.8578 76.387 63.3335 75.0524C64.8092 76.387 66.7623 77.2225 68.8891 77.2225C71.0158 77.2225 72.9689 76.387 74.4446 75.0524C75.9203 76.387 77.8734 77.2225 80.0002 77.2225C82.1269 77.2225 84.08 76.387 85.5557 75.0524C87.0314 76.387 88.9845 77.2225 91.1113 77.2225C93.238 77.2225 95.1911 76.387 96.6668 75.0524C98.1425 76.387 100.096 77.2225 102.222 77.2225C104.349 77.2225 106.302 76.387 107.778 75.0524V107.778H102.222V82.7781H85.5557V107.778H52.2224V75.0524ZM57.7779 82.7781V102.223H80.0002V82.7781H57.7779ZM63.3335 88.3337H74.4446V96.667H63.3335V88.3337Z" fill="#C8C8C8" />
                            </g>
                            <defs>
                                <clipPath id="clip0_5379_118965">
                                    <rect width="88.8889" height="88.8889" fill="white" transform="translate(35.5557 35.5557)" />
                                </clipPath>
                            </defs>
                        </svg>

                    </div>
                    <div class=" font-semibold mt-12 text-center" style="color:#000; font-size:12px; font-weight:500; line-height:14px; text-align:center">まだブックマークされたクラブがありません。</div>
                    @*<div style="margin-left:24px; margin-right:24px">

                            <div style="border-radius: 8px; background: var(--Darker_Primary, #D75A8B); padding:8px 20px; font-size:14px; color:#fff; font-weight:500; line-height:inherit; width:100%; margin-top:24px; text-align:center">
                                マイページヘ
                            </div>
                        </div>*@

                </div>
                <div style="margin-left:24px;margin-right:24px;" class="flex flex-row justify-center rounded-[8px] bg-[#D75A8B] mt-[16px]" onclick="window.location.href='@Url.Action("Index", "DashboardV2")'" id="DateTimeFilter-Id">
                    <div class="my-[12px] text-[12px] font-[700] text-[#FFF] text-center " style="width:100%">
                        マイページヘ
                    </div>
                </div>
            }
            else
            {
                foreach (var club in Model.BookmarkedClubs)
                {
                    <div class="flex flex-col  gap-1 w-full   border-b-[4px] border-[#E5E5E5]">
                        <!-- location -->
                        <section class="tags flex flex-wrap pt-3 pb-2 gap-2 px-4 items-center ">
                            @if (!string.IsNullOrEmpty(club.Tag1))
                            {
                                <div style="border-radius: 2px; border:1px solid #F6F6F6" class="px-[2px] flex items-center justify-center gap-[2px] text-[#A09E91] text-[10px] leading-[16px]">
                                    <i class="fa-solid fa-location-dot text-[10px] text-[#D75A8B]"></i>
                                    @club.Tag1
                                </div>
                            }
                            <div class=" flex self-center gap-0.5  ">
                                @if (!string.IsNullOrEmpty(club.Tag2))
                                {
                                    <span class="  lg:text-[9px] text-xs   self-center   px-2 rounded-sm  bg-[#BFA3B6] text-[#FFFFFF]">
                                        @club.Tag2
                                    </span>
                                }
                                @if (!string.IsNullOrEmpty(club.Tag3))
                                {
                                    <span class="  lg:text-[9px] text-xs   self-center    px-2 rounded-sm  bg-[#697DBF] text-[#FFFFFF]">
                                        @club.Tag3
                                    </span>
                                }
                                @if (!string.IsNullOrEmpty(club.Tag4))
                                {
                                    <span class="   lg:text-[9px] text-xs   self-center    px-2 rounded-sm  text-[#FFFFFF] bg-[#96B41F]">
                                        @club.Tag4
                                    </span>
                                }
                                @if (!string.IsNullOrEmpty(club.Tag5))
                                {
                                    <span class="   lg:text-[9px] text-xs   self-center    px-2 rounded-sm   text-[#FFFFFF] bg-[#EFB726]">
                                        @club.Tag5
                                    </span>
                                }
                            </div>
                        </section>

                        <!-- club name -->
                        <section class="w-full flex px-4 pb-2 justify-between ">
                            <a onClick={goToTop}>
                                <div class="flex gap-2  hover:cursor-pointer transition-all delay-150">
                                    <div class="h-12 w-12 rounded-full border-borderColor bg-primary border overflow-hidden" onclick="ClubDetailActionFunction('@club.LocationId', '@club.ClubId')">
                                        <img src="@club.ClubLogo" alt="" title="club logo"
                                             class="w-full h-full image-cover" />
                                    </div>

                                    <div class="flex flex-col ">
                                        <div class="flex gap-1 text-base items-center  font-semibold">
                                            <div class="text-base items-start " title="club name">
                                                @club.ClubName
                                            </div>
                                        </div>
                                        <div class="text-xs items-start " title="club ">
                                            @club.ClubNameJapanese
                                        </div>
                                        <div class="text-[10px] items-start text-[#E3A1A1] " title="club group">
                                            @club.GroupName
                                        </div>
                                    </div>
                                </div>
                            </a>
                            <div class=" w-6 h-6 flex flex-col justify-center items-center  scale-90">
                                <div class="flex flex-col justify-center items-center hover:cursor-pointer">

                                    <div onclick="ManageBookmark('@club.ClubId','','club', this)">
                                        <img src="~/Content/assets/images/bookmark-filled.svg" class="h-[24px] w-[24px] image-cover" alt="filled bookmark" />
                                    </div>

                                    <div style="line-height: 100%;" class="text-[9px] text-[#BCB08A] ">
                                        保存
                                    </div>
                                </div>
                            </div>
                        </section>
                        <!-- photo -->
                        <section class="h-auto w-full grid grid-cols-3 bg-light gap-0.5">
                            @foreach (var item2 in club.HostGalleryImage)
                            {
                                <div class=" " onclick="OpenImagePopup('@item2')">
                                    <img src="@item2"
                                         class="aspect-square image-cover h-[120px] w-full" />
                                </div>
                            }

                        </section>

                        <!-- rating /commment -->
                        <section class=" flex justify-start flex-wrap align-top mt-2 px-4 gap-3">
                            <div class="flex items-center gap-0.5" title="club rank">
                                @{
                                    var unratedScale = (5 - club.AverageRating);
                                    for (int i = 0; i < club.AverageRating; i++)
                                    {
                                        <img src="~/Content/assets/images/ratingstar-filled.svg" class="h-[18px] w-[18px]" alt="rated" />
                                    }
                                    for (int i = 0; i < unratedScale; i++)
                                    {
                                        <img src="~/Content/assets/images/ratingstar-notfilled.svg" class="h-[18px] w-[18px]" alt="unrated" />
                                    }
                                }
                                <div class=" text-xs scale-110" title="club rating">
                                    @club.AverageRating
                                </div>
                            </div>

                            <div class="flex items-center gap-1 scale-75">
                                <div class="flex items-center  " title="comment">

                                    <svg class="w-7 h-7" xmlns="http://www.w3.org/2000/svg" width="17" height="16" viewBox="0 0 17 16"
                                         fill="none">
                                        <path d="M1.52429 2.90909V12.8487H6.35078L8.06975 14.5455L9.78872 12.8487H14.6152V2.90909H1.52429ZM2.53129 3.90305H13.6082V11.8548H9.37176L8.06975 13.1399L6.76774 11.8548H2.53129V3.90305ZM4.54527 5.394V6.38796H11.5942V5.394H4.54527ZM4.54527 7.38192V8.37589H11.5942V7.38192H4.54527ZM4.54527 9.36985V10.3638H9.58024V9.36985H4.54527Z"
                                              fill="#BCB08A" />
                                    </svg>
                                </div>

                                <div class=" text-xs scale-110">@club.TotalComment</div>
                            </div>
                        </section>

                        <!-- club description -->

                        <section class="flex flex-col gap-2 px-4 mb-3 ">
                            <p class="line-clamp-3 font-[Noto Sans] text-xs   text-[#333333]">
                                @club.ClubDescription
                            </p>
                        </section>

                        <div class="px-4 py-[12px] flex justify-between items-center">
                            <div>
                                @if (!string.IsNullOrEmpty(club.ClubOpeningTime) && !string.IsNullOrEmpty(club.ClubClosingTime))
                                {
                                    <div class="flex justify-center items-center gap-1 pb-1">
                                        @if (!string.IsNullOrEmpty(club.ClubTimePeriod) && club.ClubTimePeriod.Trim().ToUpper() == "DAY")
                                        {
                                            <div class="h-4 w-4 rounded-[2px] bg-[#F89336] flex justify-center items-center">
                                                <img src="~/Content/assets/images/customer/sun.svg" />
                                            </div>
                                        }
                                        else if (!string.IsNullOrEmpty(club.ClubTimePeriod) && club.ClubTimePeriod.Trim().ToUpper() == "NIGHT")
                                        {
                                            <div class="h-4 w-4 rounded-[2px] bg-[#F89336] flex justify-center items-center">
                                                <img src="~/Content/assets/images/customer/moon.svg" />
                                            </div>
                                        }
                                        <div class="text-sm text-secondary-1 flex justify-center items-center">
                                            @club.ClubOpeningTime <span>
                                                <img src="~/Content/assets/images/customer/time-duration.svg" style="height:9px; width:8px" />

                                            </span>@club.ClubClosingTime
                                        </div>
                                    </div>
                                    if (!string.IsNullOrEmpty(club.TodaysClubSchedule) && club.TodaysClubSchedule.Trim().ToUpper() == "RESERVABLE")
                                    {
                                        <div class="bg-[#BCB08A] text-white w-max px-2 rounded-[2px] text-xs h-[18px] flex items-center justify-center">
                                            @CRS.CUSTOMER.APPLICATION.Resources.Resource.Reservable
                                        </div>
                                    }
                                    else
                                    {
                                        <div class="bg-[#D7D7D7] text-white w-max px-2 rounded-[2px] text-xs h-[18px] flex items-center justify-center" style="background: #D7D7D7;  width:100%">
                                            @CRS.CUSTOMER.APPLICATION.Resources.Resource.Reservable
                                        </div>
                                    }
                                }
                            </div>

                            @*<button class="btn-gradient" onclick="ClubReservationActionFunction('@club.ClubId', '@club.ClubName')">*@
                            <button class="btn-gradient" onclick="InitiateClubReservationFunction('@club.ClubId')">
                                @CRS.CUSTOMER.APPLICATION.Resources.Resource.Book_Now
                            </button>

                        </div>

                    </div>
                }
            }
        </div>
        <div id="tab2" class="tab-content-plane hidden">
            <div class="flex flex-row items-center bg-[#E5E5E5] h-[32px]">
                <p class="pl-[16px] text-[14px] font-[500] ">
                    @hostCount @CRS.CUSTOMER.APPLICATION.Resources.Resource.Items
                </p>
            </div>
            @if (Model.BookmarkedHosts.Count <= 0)
            {
                @* <div class="flex flex-col gap-4 p-4  border-t border-t-[#E0E0E0] flex justify-center items-center">
                        <div class="text-[#18181B] font-semibold mt-12 text-center">まだブックマークされたホストがありません。</div>
                    </div>*@
                <div class="flex flex-col gap-4 p-4  border-t border-t-[#E0E0E0]  justify-center items-center " style="padding-top:64px">
                    @*<div>*@
                    <div style="display:flex; justify-content:center; align-items:center">
                        <svg width="160" height="160" viewBox="0 0 160 160" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="80" cy="80" r="79" stroke="#F4F4F4" stroke-width="2" />
                            <path d="M79.9999 49.4443C69.2903 49.4443 60.5555 58.1791 60.5555 68.8888C60.5555 75.5837 63.9735 81.5298 69.1493 85.0346C59.2426 89.2881 52.2222 99.1188 52.2222 110.555H57.7777C57.7777 98.2508 67.6953 88.3332 79.9999 88.3332C92.3046 88.3332 102.222 98.2508 102.222 110.555H107.778C107.778 99.1188 100.757 89.2881 90.8506 85.0346C96.0264 81.5298 99.4444 75.5837 99.4444 68.8888C99.4444 58.1791 90.7096 49.4443 79.9999 49.4443ZM79.9999 54.9999C87.7039 54.9999 93.8888 61.1848 93.8888 68.8888C93.8888 76.5928 87.7039 82.7777 79.9999 82.7777C72.296 82.7777 66.1111 76.5928 66.1111 68.8888C66.1111 61.1848 72.296 54.9999 79.9999 54.9999Z" fill="#C8C8C8" />
                        </svg>


                    </div>
                    <div class=" font-semibold mt-12 text-center" style="color:#000; font-size:12px; font-weight:500; line-height:14px; text-align:center">まだブックマークされたホストがありません。</div>
                    @*<div style="margin-left:24px; margin-right:24px">

                            <div style="border-radius: 8px; background: var(--Darker_Primary, #D75A8B); padding:8px 20px; font-size:14px; color:#fff; font-weight:500; line-height:inherit; width:100%; margin-top:24px; text-align:center">
                                マイページヘ
                            </div>
                        </div>*@

                </div>
                <div style="margin-left:24px;margin-right:24px;" class="flex flex-row justify-center rounded-[8px] bg-[#D75A8B] mt-[16px]" onclick="window.location.href='@Url.Action("Index", "DashboardV2")'" id="DateTimeFilter-Id">
                    <div class="my-[12px] text-[12px] font-[700] text-[#FFF] text-center " style="width:100%">
                        マイページヘ
                    </div>
                </div>
            }
            else
            {
                foreach (var item in Model.BookmarkedHosts)
                {
                    <div class="flex flex-col border-b-[4px] border-[#E3E2DB] py-3  ">
                        <div class="flex flex-row gap-[16px] mx-[16px]">
                            <div style="border-radius: 4px;" class="w-[128px] mt-[16px]  h-auto flex  justify-end text-center relative">
                                <div class="w-full flex justify-center" onclick="window.location.href='/LocationManagement/ViewHostDetail?HostId=@item.HostId'">
                                    <img class="w-[128px] h-[180px] object-cover rounded-[2px]"
                                         src="@item.HostImage" />
                                </div>
                                <div id="like" onclick="ManageBookmark('@item.ClubId', '@item.HostId', 'host', this)">
                                    <img src="~/Content/assets/images/loveicon-filled.svg" class="h-[34px] w-[34px]" alt="bookmark" />
                                </div>
                            </div>
                            <div class="grid mt-[16px] mb-[10px] grid-rows-7" style="margin-right:16px">
                                <div style="line-height: 140%;" class="text-[10px]">
                                    <p class="font-[700] text-[13px]">@item.HostName </p>

                                    <p>誕生日 :<span> @item.DOB</span> </p>

                                    <p>身長 :<span> @item.Height</span> </p>

                                    <p>血液型 :<span> @item.BloodType</span> </p>

                                    <p>星座 :<span> @item.ConstellationGroup</span> </p>

                                    <p>出身地 :<span> @item.Address</span> </p>

                                    <p>前職 :<span> @item.PreviousOccupation</span> </p>
                                    <p>お酒の強さ :<span> @item.LiquorStrength </span> </p>

                                </div>
                                <div class="flex flex-row gap-1 items-center mb-[8px] mt-1">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="15" viewBox="0 0 14 15" fill="none">
                                        <path d="M2.71459 7.28802L2.70677 7.27992L2.70002 7.27344L2.69991 7.27333L2.69977 7.2732L2.69972 7.27314L2.69946 7.2729L2.69551 7.26898C2.69096 7.26443 2.68308 7.25648 2.67238 7.24533C2.65094 7.223 2.6184 7.18812 2.57856 7.14233C2.49833 7.0501 2.39165 6.91721 2.28715 6.75669C2.06486 6.41524 1.87295 6.01061 1.87295 5.57856C1.87295 4.15772 3.00042 3.00912 4.34113 3.00912C5.48553 3.00912 6.23896 3.72054 6.56537 4.06389L7.00022 4.52129L7.43507 4.06389C7.76149 3.72054 8.51491 3.00912 9.65931 3.00912C11 3.00912 12.1275 4.15772 12.1275 5.57856C12.1275 6.01777 11.9411 6.4329 11.7225 6.76253C11.6159 6.92322 11.509 7.05249 11.4297 7.14051C11.3902 7.18425 11.3583 7.21705 11.3376 7.23769C11.3272 7.24799 11.3198 7.25519 11.3156 7.25915L11.3127 7.26192L11.3121 7.26241L11.3121 7.26247L11.3119 7.26261L11.3118 7.26271L11.2993 7.27409L11.2859 7.28802L7.00022 11.7279L2.71459 7.28802Z"
                                              stroke="#D75A8B" stroke-width="1.2" />
                                    </svg>
                                    <p class="text-[10px]">
                                        @item.LoveCount
                                    </p>
                                </div>
                                <div style="padding: 4px; width:144px" class="flex bg-[#F6F6F6]  flex-row gap-[5px] rounded-[4px]">
                                    <div>
                                        <img style="border: 1px solid #F1EEEE;" class="object-cover h-[32px] w-[32px] rounded-full "
                                             src="@item.ClubLogo" alt="clublogo">
                                    </div>
                                    <div class="flex flex-col justify-center " style="width:55%">
                                        <p style="line-height: 100%;" class="text-[10px] text-[#292F33] font-[700] text-clip ">
                                            @item.ClubName
                                        </p>
                                        <p style="line-height: 100%;" class="text-[8px] text-[#A09E91] font-[400] text-clip ">
                                            @item.ClubNameJap
                                        </p>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                }
            }
        </div>
    </div>
</div>
<div class="loader" id="loader-id">
    <img src="~/Content/assets/images/loader.gif" class="h-[150px]" />
</div>

@section scripts
{
    <script src="~/Content/CustomHelper.js"></script>

    <script type="text/javascript">
        document.addEventListener("DOMContentLoaded", function () {
            // The DOM is fully loaded, hide the loader
            document.getElementById("loader-id").style.display = "none";
        });

        // If you also want to handle external resources like images, use the load event
        window.addEventListener("load", function () {
            // The entire page, including external resources, is fully loaded, hide the loader
            document.getElementById("loader-id").style.display = "none";
        });

        function ActivateLoaderFunction() {
            var myDiv = document.getElementById("loader-id");
            myDiv.style.display = "flex";
        }
        function DeactivateLoaderFunction() {
            var myDiv = document.getElementById("loader-id");
            myDiv.style.display = "none";
        }

        function ClubDetailActionFunction(i, j) {
            window.location.href = "/LocationManagement/ClubDetail_V2?LocationId=" + i + "&&ClubId=" + j;
        }
    </script>
}
